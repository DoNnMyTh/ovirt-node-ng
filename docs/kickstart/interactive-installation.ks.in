auth --enableshadow --passalgo=sha512
selinux --permissive
network --bootproto=dhcp --hostname=node

user --name=node --lock

bootloader --timeout=1


#
# Two important defaults are set here:
#
# 1. autopart with LVM Thin
#    Ensures that the disk setup will use LVM Thin by default
# 2. liveimg
#    Ensures that anaconda is using the liveimg for installation
#

autopart --type=thinp --fstype=ext4 
# --fsoptions=discard  # Not yet supported on CentOS 7
# https://bugzilla.redhat.com/show_bug.cgi?id=1285684

liveimg --url=@SQUASHFS_URL@

%post
# FIXME maybe the folowing lines can be collapsed
# in future into i.e. "nodectl init"
# FIXME ovirt-node-ng-1.0-0.0 can be guessed in the anaconda env
imgbase layout --init ovirt-node-ng-1.0-0.0
imgbase --experimental volume --create /var 4G
%end
